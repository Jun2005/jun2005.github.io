<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playwrite+HR:wght@100..400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Basic&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
    
  <body>
    <h1 id="title">String Art Generator</h1>

    <button id="details-button" class="bold">Click me for details</button>
    <div id="details-container">
      <p id="details">
        <span class="green-text m-text bold">Number of pins:</span><br>
        The number of points around the circular canvas from which a string/line can start from. 
        The larger the number, the more detailed the final art piece will be. It will also take 
        longer to process the more pins there are.<br>
        <br>
        <span class="green-text m-text bold">Number of strings:</span><br>
        The number of lines on the canvas. Start small, you can add more later but you can't 
        remove lines.<br>
        <br>
        <span class="green-text m-text bold">String opacity:</span><br>
        Adjusts the darkness of each line. Smaller numbers mean it will take more strings to be 
        a well defined image, but the final result can be a lot more detailed.<br>
        <br>
        <span class="green-text m-text bold">String thickness:</span><br>
        Generally speaking, it's best if this parameter is as small as possible. Too small 
        and the line won't to visible so try and fine tune this parameter.<br>
        <br>
        <span class="green-text m-text bold">Tips:</span><br>
        If the generated art is blurry, try resizing the browser to be as large as 
        possible and refresh the page. This will make the art piece render at a higher resolution.
      </p>
    </div>

    <div id="initial-settings-container">
      <label for="img-input" class="grid-col-1">Image to stringify : </label>
      <div class="grid-col-3">
        <label for="img-input" class="button" id="choose-file-button">Choose file</label>
        <p id="file-name"></p>
      </div>
      <input id="img-input" type="file" accept="image/*" required>

      <div id="preview-container">
        <canvas id="preview-canvas"></canvas>
        <canvas id="crop-region-canvas"></canvas>
        <div id="top-left-crop"></div>
        <div id="bottom-right-crop"></div>
        <div id="drag-crop"></div>
      </div>

      <label for="pins-input" class="grid-col-1">Number of pins :</label>
      <input id="pins-input" type="number" min="50" max="500" step="1" value="200" class="grid-col-3" required>

      <label for="strings-input" class="grid-col-1">Number of strings :</label>
      <input id="strings-input" type="number" min="1" max="4000" step="1" value="100" class="grid-col-3" required>

      <label for="string-opacity-input" class="grid-col-1">String opacity (0~1) :</label>
      <input id="string-opacity-input" type="number" min="0" max="1" value="0.20" class="grid-col-3" required>

      <label for="string-thickness-input" class="grid-col-1">String thickness :</label>
      <input id="string-thickness-input" type="number" min="0" max="0.01" value="0.002" class="grid-col-3" required>

      <button type="button" id="generate-btn" class="button">Generate</button>
    </div>
    
    <div id="additional-settings-container">
      <label for="reference-opacity-slider" id="reference-opacity-slider-label">Reference opacity:</label>
      <input id="reference-opacity-slider" type="range" min="0" max="1" step="0.01" value="0.1" class="slider">
      <hr id="additional-settings-divider">
      <label for="additional-strings-input" class="grid-col-1">Number of additional strings:</label>
      <input id="additional-strings-input" type="number" min="1" max="4000" step="1" value="100" class="grid-col-3" required>
      <button type="button" id="add-btn" class="grid-col-5 button">Add</button>
    </div>

    <div id="load-bar-container">
      <div id="load-bar-fill"></div>
      <p id="load-bar-percentage">100%</p>
    </div>

    <div id="canvas-container">
      <div id="canvas-background"></div>
      <canvas id="image" class="art-canvas"></canvas>
      <canvas id="canvas" class="art-canvas"></canvas>
      <canvas id="pins" class="art-canvas"></canvas>
      <canvas id="reference" class="art-canvas"></canvas>
      <canvas id="export-canvas" class="art-canvas"></canvas>
    </div>
    
    <div id="menu">
      <button type="button" id="download-btn" class="button">Download</button>
      <button type="button" id="restart-btn" class="button">Restart</button>
    </div>

    <script src="script.js"></script>
  </body>
</html>
